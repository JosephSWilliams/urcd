urcd:
  af_unix relay chat daemon and
  af_unix relay chat daemon accessories...

depends:
  ucspi-tcp, python(>=2.6), daemontools,
  nacl, sh, gcc

recommends:
  python-dev(>=2.6), cython(>=0.17.3)

install:
  useradd urcd

  # python2.6
  ./Make.sh

  # python2.7
  sed 's/\.6/.7/g' Make.sh | sh

  $editor env/addr
  $editor env/port
  $editor env/serv
  $editor env/motd

  ln -s `pwd` /service/urcd

  mkdir -p /service/urcd/socket/
  chown urcd /service/urcd/socket/
  echo -n '/service/urcd/socket/' > env/path

  sleep 4
  svstat /service/urcd

interface:
  place an executable program in the cwd
  of urcd named 'stdin'. the program reads
  stdin from the irc client. anything your
  program writes to stdout will be written
  to urcd

  place an executable program in the cwd
  of urcd named 'stdout'. the program reads 
  stdin from urcd. anything your program 
  writes to stdout will be written to the
  irc client

  for urc2sd simply reverse this process. ie,
  stdin will be stdout, and vice versa. happy
  hacking :-)

server2server:
  ./bin/add-tcprecv your.urcd.ano 1234 /service/urcd/socket/

  # your peers can link their server using:
  ./bin/add-tcpsend your.urcd.ano 1234 /service/urcd/socket/

  # you will need to link to your peer's server:
  ./bin/add-tcpsend peer.urcd.ano 4321 /service/urcd/socket/

  # transit nodes may use ./add-tcplisten and clients can
  # stream with ./add-tcpconnect

curvecp server2server:
  ./bin/add-curvecprecv your.urcd.ano 1234 /service/urcd/socket/

  # your peers can link their server using:
  ./bin/add-curvecpsend your.urcd.ano 1234 /service/urcd/socket/ your.urcd.ano $your_pubkey

  # you will need to link to your peer's server:
  ./bin/add-curvecpsend peer.urcd.ano 4321 /service/urcd/socket/ peer.urcd.ano $peer_pubkey

  # transit nodes may use ./add-curvecplisten and clients can
  # stream with ./add-curvecpconnect

urc2sd:
  mkdir -p /services/urc2sd

  ln -s `pwd`/urc2sd /services/urc2sd/urc2sd
  ln -s `pwd`/ucspi-client2server /services/urc2sd/ucspi-client2server
  ln -s `pwd`/run.urc2sd /services/urc2sd/run

  printf $addr > /services/urc2sd/addr
  printf $port > /services/urc2sd/port
  printf '/path/to/socket/' > /services/urc2sd/path
  printf 'urcd' > /services/urc2sd/nick
  printf '#channel' > /services/urc2sd/channels

  touch /services/urc2sd/auto_cmd

  ln -s /services/urc2sd /service/urc2sd
